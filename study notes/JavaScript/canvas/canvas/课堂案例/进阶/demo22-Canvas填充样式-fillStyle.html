<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Canvas填充</title>
</head>
<body>
<canvas id="canvas" width="800" height="800" style="border: 1px solid #000; display: block;margin: 10px auto;">
    当前浏览器不支持Canvas,请更换浏览器以后再重试
</canvas>



<script>
    window.onload = function(){
        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        var backgroundCanvas = createBackgroundCanvas();

       // var pattrem = ctx.createPattern(backgroundCanvas,"no-repeat")
        var pattrem = ctx.createPattern(backgroundCanvas,"repeat")
        ctx.fillStyle = pattrem;
        ctx.fillRect(0,0,800,800)


    }

    function createBackgroundCanvas(){
        var backgroundCanvas = document.createElement("canvas");
        backgroundCanvas.width=100;
        backgroundCanvas.height=100;

        var bctx = backgroundCanvas.getContext("2d");

        drawStar(bctx,20,50,50,50,30);

        return backgroundCanvas;
    }


    function drawStar(ctx,r,R,x,y,rot){

        ctx.beginPath();
        for(var i = 0; i<5; i++){   //因为要用js的弧度制，所以要：/180*Math.PI  ，把角度转弧度  300：R（大）  400:位移  150：r(小)
            ctx.lineTo(Math.cos((18+i*72-rot)/180*Math.PI)*R+x ,
                    -Math.sin((18+i*72-rot)/180*Math.PI)*R+y);    //y轴是向下的   所以是 负号

            ctx.lineTo(Math.cos((54+i*72-rot)/180*Math.PI)*r+x ,
                    -Math.sin((54+i*72-rot)/180*Math.PI)*r+y);


        }
        ctx.closePath();
        ctx.stroke();

       ctx.fillStyle = "#0f0";
       ctx.fill();
    }










</script>


</body>
</html>