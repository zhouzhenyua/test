<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
#parent {width:600px; height:50px; background:#CCC; position:relative; margin:10px auto;}
#div1 {width:50px; height:50px; background:red; position:absolute; left:0; top:0;}
#div2 {width:0px; height:0px; background:#0f0; position:absolute; left:0; top:100px;}
</style>
<script>
window.onload=function () {
    var oDiv = document.getElementById("div1");
    var oDiv2 = document.getElementById("div2");
    var oParent = document.getElementById("parent");

    oDiv.onmousedown = function (ev) {
        var oEvent = ev||event;

        var shuL = oEvent.clientX - oDiv.offsetLeft;

        document.onmousemove = function (ev) {
            var oEvent = ev||event;
            var divL = oEvent.clientX - shuL;

            if(divL<0){
                divL=0
            }

            if(divL>oParent.offsetWidth-oDiv.offsetWidth){
                divL=oParent.offsetWidth-oDiv.offsetWidth
            }

            oDiv.style.left = divL+"px";
            oDiv.style.top = 0+"px";

        }

        document.onmouseup = function () {
            document.onmousemove = null;
            document.onmouseup = null;
        }

        return false;   //

    }



};
</script>
</head>

<body>
<div id="parent">
	<div id="div1"></div>
</div>
<div id="div2"></div>

</body>
</html>
